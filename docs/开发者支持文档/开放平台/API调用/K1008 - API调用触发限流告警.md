# K1008 - API调用触发限流告警

> **文档ID**: 401546  
> **页面标识**: 9b1f829db26763cb185dd119f54748111646964966070  
> **更新时间**: 1716531372737  
> **浏览量**: 30131

---

#### 问题分类：

API调用类-限流限额

#### 问题现象：

调用API报错，

1.“Exceed quota limit, KEY [appkey:ks6887777777779839]”

2.“Exceed quota limit, KEY [appkey:ks6887777777779839;primaryUserId:20009988843]”

3."Exceed qps limit, KEY [apiId:open.order.desensitise.batch;appkey:ks669347498428231705], MAX\_QPS [300.0]"

4."[1017] exceed quota limit,[apiId:open.item.category.suggested.get;primaryUserId:3649418105]"

#### 问题原因：

对应问题现象，原因如下

1.限额报错：“Exceed quota limit, KEY [appkey:ks6887777777779839]”，APP当天的实际调用量已经超过APP分配的额度，需要在控制台申请日常额度

2.测试用户报错：“Exceed quota limit, KEY [appkey:ks6887777777779839;primaryUserId:20009988843]”，快手id为20009988843的账号被添加在应用的测试列表中，超过测试流量每天2000的上限

3.限流Qps报错："Exceed qps limit, KEY [apiId:open.order.desensitise.batch;appkey:ks669347498428231705], MAX\_QPS [300.0]"，APP调用API的频次过高，需要降低调用频次

4.API限额报错：API每天每个用户的调用额度有上限，不允许再进行调用

#### 解决方案：

##### 1 限额报错

若报错为 Exceed quota limit, KEY [appkey:ks6887777777779839]格式，仅包含appKey维度的，则是appKey当天的调用流量已经超过平台分配的额度，可按照紧急程度按照重置当天流量或申请长期生效的日常流量，请至“控制台-应用中心-应用管理-应用流量”中查看当前APP的日常访问流量值，申请或重置日常场景API访问流量  
![](https://p5-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1644821237061.png)

### 

##### 2 测试用户报错

若报错为 Exceed quota limit, KEY [appkey:ks6887777777779839;primaryUserId:20009988843]格式，包含有appKey和userId维度的，请检查应用详情中的测试用户列表，**添加到测试用户列表中的用户的调用量上限为2000次/天** 。若要对用户去除限制，请确保在测试用户列表中删除该用户，并且三方和快分销APP要到最终的上架状态，让用户进行订购完成授权状态；

商家后台APP要到最终的上线状态

![](https://p4-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1645795406174.png)  
并从测试用户列表中删除掉限流的用户

![](https://p4-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1645702493602.png)

再添加授权用户到授权用户列表后，让用户对APP重新授权完成授权状态

![](https://p4-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1647324207649.png)

第三方开发者的应用和快分销应用需要为上架状态，即如下图所示展示服务信息。商家到服务详情页订购完成对应用的授权。

![](https://p4-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1645795817034.png)

##### 3 限流报错

若报错为 Exceed qps limit, KEY [apiId:open.order.desensitise.batch;appkey:ks669347498428231705], MAX\_QPS [300.0] 格式，表示APP调用当前API的频次过高，需要降低调用频次，若要申请提高Qps，请至“控制台-应用中心-应用管理-应用流量”中查看当前APP的日常访问流量值，申请或重置日常场景API访问流量  
![](https://p2-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1644821237061.png)

##### 4 API限额报错

若报错为 [1017] exceed quota limit，APP已达到当天调用额度限制，请申请额度，[apiId:open.item.category.suggested.get;primaryUserId:3649418105] 格式，表示每个用户每天调用此API的额度有上限，不允许再继续调用，请使用有额度的商家进行调用或次日再进行调用

![](https://p2-ec.ecukwai.com/kos/nlav10684/gravity-open-editor/gravity-open-editor-1716531291788.png)

#### 关键字：

应用流量

触发限流

Exceed quota limit

Exceed qps limit
